{"version":3,"file":"flexus.js","sources":["../src/js/animations/polyfill.js","../src/js/animations/util.js","../src/js/animations/AnimationOrchestrator.js","../src/js/animations/Transition.js","../src/js/animations/ViewTransition.js"],"sourcesContent":[";(function() {\r\n\t// It looks stupid but is necessary. Animation class is not globally accessible.\r\n\tvar dummy = document.createElement('div')\r\n\tvar animation = dummy.animate({})\r\n\tvar Animation = animation.constructor\r\n\tif ('finished' in Animation.prototype) return\r\n\tObject.defineProperty(Animation.prototype, 'finished', {\r\n\t\tget() {\r\n\t\t\tif (this._finished)\r\n\t\t\t\treturn this._finished\r\n\t\t\tif (this.playState === 'finished')\r\n\t\t\t\treturn this._finished = new Promise.resolve()\r\n\t\t\treturn this._finished = new Promise((resolve, reject) => {\r\n\t\t\t\tthis.onfinish = resolve\r\n\t\t\t\tthis.oncancel = reject\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n})();","export var promiseTimeout = millis => new Promise(resolve => setTimeout(resolve, millis))\r\n\r\nexport function cloneNode(original) {\r\n\tvar computed = window.getComputedStyle(original)\r\n\tvar clone = document.createElement(original.localName)\r\n\tclone.innerHTML = original.innerHTML\r\n\tclone.style.fontSize = computed.fontSize\r\n\tclone.style.fontWeight = computed.fontWeight\r\n\tclone.style.color = computed.color\r\n\treturn clone\r\n}\r\n\r\nexport function highlight(arg, color = 'red') {\r\n\tif (arg instanceof HTMLElement)\r\n\t\tvar bbox = arg.getBoundingClientRect()\r\n\telse\r\n\t\tvar bbox = arg\r\n\tvar div = document.createElement('div')\r\n\tObject.assign(div.style, {\r\n\t\tposition: 'absolute',\r\n\t\tzIndex: 9999,\r\n\t\tleft: bbox.left + 'px',\r\n\t\ttop: bbox.top + 'px',\r\n\t\twidth: bbox.width + 'px',\r\n\t\theight: bbox.height + 'px',\r\n\t\toutline: `2px solid ${color}`,\r\n\t})\r\n\tdocument.body.append(div)\r\n\treturn div\r\n}","import './polyfill.js'\r\nimport {promiseTimeout} from './util.js'\r\n\r\n\r\nfunction reverseKeyframes(keyframes) {\r\n\tvar entries = Object\r\n\t\t.entries(keyframes)\r\n\t\t.filter(pair => Array.isArray(pair[1]))\r\n\t\t.map(reverseEntry)\r\n\treturn objectFromEntries(entries)\r\n}\r\n\r\nfunction reverseEntry(entry) {\r\n\treturn [entry[0], entry[1].reverse()]\r\n}\r\n\r\nexport class AnimationOrchestrator {\r\n\t\r\n\tconstructor() {\r\n\t\tthis.requests = []\r\n\t\tthis.animations = []\r\n\t\tthis.duration = 150\r\n\t\t// 'both' id combination of 'forwards' and 'backwards'.\r\n\t\t// 'forwards' keeps the end keyframe applied even after animation is over.\r\n\t\t// 'backwards' applies the first keyframe before the animation starts (in combination with delay).\r\n\t\tthis.fill = 'both'\r\n\t\t// Default sine easing to make the animations more snappy and playful.\r\n\t\tthis.easing = 'cubic-bezier(0.4, 0.0, 0.2, 1)'\r\n\r\n\t\tthis.started = new Promise(resolve => this.startedResolve = resolve)\r\n\t}\r\n\r\n\tget finished() {\r\n\t\treturn this.started.then(() => {\r\n\t\t\tvar promises = this.animations.map(a => a.finished)\r\n\t\t\treturn Promise.all(promises)\r\n\t\t})\r\n\t}\r\n\r\n\tget running() {\r\n\t\treturn this.animations.some(a => a.playState === 'running')\r\n\t}\r\n\r\n\tschedule(node, keyframes, start = 0, end = 1) {\r\n\t\tthis.requests.push({node, keyframes, start, end})\r\n\t}\r\n\r\n\tfinalize(direction = 'normal', speed = 1) {\r\n\t\tlet {easing, fill} = this\r\n\t\tlet totalDuration = this.duration * speed\r\n\t\tfor (let {node, keyframes, start, end} of this.requests) {\r\n\t\t\tlet duration = (end - start) * totalDuration\r\n\t\t\tlet delay = 0\r\n\t\t\tif (direction === 'normal') {\r\n\t\t\t\tdelay = start * totalDuration\r\n\t\t\t} else {\r\n\t\t\t\tdelay = (1 - end) * totalDuration\r\n\t\t\t\t// Reversing values manually because 'direction' is unreliable and causes problems with delays.\r\n\t\t\t\tkeyframes = reverseKeyframes(keyframes)\r\n\t\t\t}\r\n\t\t\tlet options = {delay, duration, easing, fill}\r\n\t\t\tlet animation = node.animate(keyframes, options)\r\n\t\t\tthis.animations.push(animation)\r\n\t\t}\r\n\t}\r\n\r\n\tasync play(...args) {\r\n\t\tawait this.playOnly(...args)\r\n\t\t// Wrapping the cancellation in yet another delay (just till the end of current event loop)\r\n\t\t// to ensure that the owner can finalize the animations. e.g. hiding the element with dispay:none\r\n\t\t// before we cancel the 'fill' animation. Cancelling first could cause quick flash.\r\n\t\tawait promiseTimeout()\r\n\t\tthis.cancel()\r\n\t}\r\n\r\n\tasync playOnly(...args) {\r\n\t\t// Turn requests into Animation instances (and fill this.animations array).\r\n\t\tthis.finalize(...args)\r\n\t\t// resolve this.started promise.\r\n\t\tthis.startedResolve()\r\n\t\t// Wait till all animations finish playing.\r\n\t\tawait this.finished\r\n\t}\r\n\r\n\tcancel() {\r\n\t\twhile (this.animations.length) {\r\n\t\t\tlet animation = this.animations.pop()\r\n\t\t\tif (animation.playState === 'running')\r\n\t\t\t\tanimation.cancel()\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\n","import {AnimationOrchestrator} from './AnimationOrchestrator.js'\r\nimport {cloneNode, highlight} from './util.js'\r\n\r\n\r\nfunction calculateTransform(translateX, translateY, scaleX, scaleY) {\r\n\tvar temp = `translate(${translateX}px, ${translateY}px)`\r\n\tif (scaleX !== undefined && scaleY !== undefined)\r\n\t\ttemp += ` scale(${scaleX}, ${scaleY})`\r\n\treturn temp\r\n}\r\nfunction getTransformKeyframes(translateX, translateY, scaleX, scaleY) {\r\n\treturn {\r\n\t\ttransform: [\r\n\t\t\t`translate(0px, 0px) scale(1, 1)`,\r\n\t\t\tcalculateTransform(translateX, translateY, scaleX, scaleY)\r\n\t\t]\r\n\t}\r\n}\r\n\r\nexport class Transition extends AnimationOrchestrator {\r\n\r\n\tconstructor() {\r\n\t\tsuper()\r\n\t\tthis.originSideX = 'left'\r\n\t\tthis.originSideY = 'top'\r\n\t}\r\n\r\n\tget transformOrigin() {\r\n\t\treturn `${this.originSideX} ${this.originSideY}`\r\n\t}\r\n\tset transformOrigin(string) {\r\n\t\tthis.originSideX = this.originSideY = 'center'\r\n\t\tswitch (string) {\r\n\t\t\tcase 'center': return\r\n\t\t\tcase 'top':    return this.originSideY = 'top'\r\n\t\t\tcase 'right':  return this.originSideX = 'right'\r\n\t\t\tcase 'bottom': return this.originSideY = 'bottom'\r\n\t\t\tcase 'left':   return this.originSideX = 'left'\r\n\t\t\tdefault:\r\n\t\t\t\tvar {originSideX, originSideY} = string.split(' ')\r\n\t\t\t\tthis.originSideX = originSideX\r\n\t\t\t\tthis.originSideY = originSideY\r\n\t\t}\r\n\t}\r\n\r\n\t// PLAYBACK\r\n\r\n\tin() {\r\n\t\treturn this.play('normal', 1)\r\n\t}\r\n\r\n\tout() {\r\n\t\treturn this.play('reverse', 0.7)\r\n\t}\r\n\r\n\t// CALCULATIONS\r\n\r\n\tcalculateResizeKeyframes(from, to) {\r\n\t\tvar fromBbox = from.getBoundingClientRect()\r\n\t\tvar toBbox = to.getBoundingClientRect()\r\n\t\treturn {\r\n\t\t\ttop:    [fromBbox.top + 'px',    toBbox.top + 'px'],\r\n\t\t\tleft:   [fromBbox.left + 'px',   toBbox.left + 'px'],\r\n\t\t\twidth:  [fromBbox.width + 'px',  toBbox.width + 'px'],\r\n\t\t\theight: [fromBbox.height + 'px', toBbox.height + 'px'],\r\n\t\t\t//borderRadius: [this.originComputed.borderRadius, this.newComputed.borderRadius],\r\n\t\t\t//clipPath: [`inset(0px 0px 0px 0px round ${this.newComputed.borderRadius})`, 'inset(0px 0px 0px 0px round 0px)']\r\n\t\t}\r\n\t}\r\n\r\n\t_translateTo(node, origin, pivot) {\r\n\t\tvar originBbox = origin.getBoundingClientRect()\r\n\t\tvar pivotBbox = pivot.getBoundingClientRect()\r\n\r\n\t\tvar translateX = originBbox.left - pivotBbox.left\r\n\t\tvar translateY = originBbox.top - pivotBbox.top\r\n\r\n\t\treturn {translateX, translateY}\r\n\t}\r\n\r\n\t_scaleTo(node, origin, pivot) {\r\n\t\tvar nodeBbox   = node.getBoundingClientRect()\r\n\t\tvar originBbox = origin.getBoundingClientRect()\r\n\t\tvar pivotBbox  = pivot.getBoundingClientRect()\r\n\r\n\t\tvar scaleX = originBbox.width  / pivotBbox.width\r\n\t\tvar scaleY = originBbox.height / pivotBbox.height\r\n\t\tvar translateX = (pivotBbox.left - nodeBbox.left) * (1 - scaleX)\r\n\t\tvar translateY = (pivotBbox.top  - nodeBbox.top)  * (1 - scaleY)\r\n/*\r\n\t\tif (this.transformOrigin) {\r\n\t\t\tif (neco == 'left') {\r\n\t\t\t\tvar translateX = (pivotBbox.left - nodeBbox.left) * (1 - scaleX)\r\n\t\t\t} else if (neco === 'ight') {\r\n\t\t\t\tvar translateX = (pivotBbox.right - nodeBbox.right) * (1 - scaleX)\r\n\t\t\t}\r\n\t\t\t// TODO: dodelat\r\n\t\t}\r\n*/\r\n\t\treturn {translateX, translateY, scaleX, scaleY}\r\n\t}\r\n\r\n\t// TRANSITIONS\r\n\r\n\t// view   - transformed view\r\n\t// origin - target position to translate and scale the view to fit into.\r\n\t// pivot  - element in animated view that will match origin element.\r\n\t// example: calendar app. clicking uppon event in event list opens a new 'view',\r\n\t//          the event (small blue rectangle) is the 'origin', it then scales up to grow\r\n\t//          as large as the 'pivot' and translates to pivot's position.\r\n\t//          by default pivot is the whole new view, but it could be a portion of it, like\r\n\t//          a tall blue toolbar. in which case the origin only grows to fill and match the toolbar.\r\n\r\n\t// NOTE: In the future we will be able to use {composite:'add'} to combine multiple\r\n\t//       transform animations.\r\n\ttransformTo(node, origin, pivot = node, start = 0, end = 1) {\r\n\t\tvar {translateX, translateY, scaleX, scaleY} = this._scaleTo(node, origin, pivot)\r\n\t\tvar temp = this._translateTo(node, origin, pivot)\r\n\t\ttranslateX += temp.translateX\r\n\t\ttranslateY += temp.translateY\r\n\t\tvar keyframes = getTransformKeyframes(translateX, translateY, scaleX, scaleY)\r\n\t\tkeyframes.transformOrigin = [this.transformOrigin, this.transformOrigin]\r\n\t\tthis.schedule(node, keyframes, start, end)\r\n\t}\r\n\r\n\ttranslateTo(node, origin, pivot = node, start = 0, end = 1) {\r\n\t\tvar {translateX, translateY} = this._translateTo(node, origin, pivot)\r\n\t\tvar keyframes = getTransformKeyframes(translateX, translateY)\r\n\t\tkeyframes.transformOrigin = [this.transformOrigin, this.transformOrigin]\r\n\t\tthis.schedule(node, keyframes, start, end)\r\n\t}\r\n\r\n\tscaleTo(node, origin, pivot = node, start = 0, end = 1) {\r\n\t\tvar {translateX, translateY, scaleX, scaleY} = this._scaleTo(node, origin, pivot)\r\n\t\tvar keyframes = getTransformKeyframes(translateX, translateY, scaleX, scaleY)\r\n\t\tkeyframes.transformOrigin = [this.transformOrigin, this.transformOrigin]\r\n\t\t//keyframes.transformOrigin = ['left top', 'left top']\r\n\t\tthis.schedule(node, keyframes, start, end)\r\n\t}\r\n\r\n\tclipTo(view, origin, start = 0, end = 1) {\r\n\t\tvar viewBbox = view.getBoundingClientRect()\r\n\t\tvar originBbox = origin.getBoundingClientRect()\r\n\r\n\t\tvar top    = originBbox.top - viewBbox.top\r\n\t\tvar right  = viewBbox.right - originBbox.right\r\n\t\tvar bottom = viewBbox.height - originBbox.bottom\r\n\t\tvar left   = originBbox.left - viewBbox.left\r\n\r\n\t\tvar keyframes = {\r\n\t\t\tclipPath: [\r\n\t\t\t\t`inset(0px 0px 0px 0px round 0px)`,\r\n\t\t\t\t`inset(${top}px ${right}px ${bottom}px ${left}px round 0px)`,\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t\tthis.schedule(view, keyframes, start, end)\r\n\t}\r\n\r\n\r\n\tfadeOut(node, start = 0, end = 1) {\r\n\t\t//var keyframes = this.getKeyframes(node)\r\n\t\tvar keyframes = {\r\n\t\t\topacity: [1, 0]\r\n\t\t}\r\n\t\tthis.schedule(node, keyframes, start, end)\r\n\t}\r\n\r\n\tfadeIn(node, start = 0, end = 1) {\r\n\t\t//var keyframes = this.getKeyframes(node)\r\n\t\tvar keyframes = {\r\n\t\t\topacity: [0, 1]\r\n\t\t}\r\n\t\tthis.schedule(node, keyframes, start, end)\r\n\t}\r\n\r\n\r\n\r\n\tasync transitionTextNode($from, $to) {\r\n\t\tvar fromBbox = $from.getBoundingClientRect()\r\n\t\tvar toBbox = $to.getBoundingClientRect()\r\n\r\n\t\tvar fromComputed = window.getComputedStyle($from)\r\n\t\tvar toComputed = window.getComputedStyle($to)\r\n\r\n\t\tvar $clone = cloneNode($from)\r\n\t\tObject.assign($clone.style, {\r\n\t\t\tposition: 'absolute',\r\n\t\t\tzIndex: 105,\r\n\t\t\ttop: fromBbox.top + 'px',\r\n\t\t\tleft: fromBbox.left + 'px',\r\n\t\t})\r\n\t\tdocument.body.appendChild($clone)\r\n\r\n\t\t$from.style.visibility = 'hidden'\r\n\t\t$to.style.visibility = 'hidden'\r\n\r\n\t\tvar keyframes = {\r\n\t\t\ttransformOrigin: ['top left', 'top left'],\r\n\t\t\ttransform: [\r\n\t\t\t\t`translate(0, 0)`,\r\n\t\t\t\t`translate(${toBbox.left - fromBbox.left}px, ${toBbox.top - fromBbox.top}px)`,\r\n\t\t\t],\r\n\t\t\tcolor: [fromComputed.color, toComputed.color],\r\n\t\t\tfontSize: [fromComputed.fontSize, toComputed.fontSize],\r\n\t\t\tfontWeight: [fromComputed.fontWeight, toComputed.fontWeight],\r\n\t\t\tletterSpacing: [fromComputed.letterSpacing, toComputed.letterSpacing],\r\n\t\t\t//opacity: [0, 1],\r\n\t\t}\r\n\r\n\t\t$from.style.visibility = 'hidden'\r\n\t\t$to.style.visibility = 'hidden'\r\n\r\n\t\tthis.schedule($clone, keyframes)\r\n\r\n\t\t// TODO: better implement this\r\n\t\tawait this.finished\r\n\t\tconsole.log('remove text node')\r\n\t\t$from.style.visibility = ''\r\n\t\t$to.style.visibility = ''\r\n\t\t$clone.remove()\r\n\r\n\t}\r\n\r\n\r\n\r\n}\r\n","import {Transition} from './Transition.js'\r\n\r\n\r\nconst ZINDEX_BASEVIEW = 99\r\nconst ZINDEX_BACKDROP = 100\r\nconst ZINDEX_SHEET    = 101\r\nconst ZINDEX_ORIGINBG = 102\r\nconst ZINDEX_ORIGIN   = 103\r\nconst ZINDEX_NEWVIEW  = 104\r\n\r\nexport class ViewTransition extends Transition {\r\n\r\n\tconstructor(baseView, newView, origin, pivot = newView) {\r\n\t\tsuper()\r\n\t\tthis.baseView = baseView\r\n\t\tthis.newView  = newView\r\n\t\tthis.origin   = origin\r\n\t\tthis.pivot    = pivot\r\n\r\n\t\tthis.duration = 250\r\n\t\tthis.fill = 'both'\r\n\t\tthis.easing = 'cubic-bezier(0.4, 0.0, 0.2, 1)'\r\n\r\n\t\t// display all so that we can measure bboxes.\r\n\t\tthis.baseView.style.display = ''\r\n\t\tthis.newView.style.display = ''\r\n\r\n\t\tthis.baseViewBbox   = this.baseView.getBoundingClientRect()\r\n\t\tthis.newViewBbox    = this.newView.getBoundingClientRect()\r\n\t\tthis.originBbox     = this.origin.getBoundingClientRect()\r\n\t\tthis.originComputed = window.getComputedStyle(origin)\r\n\t\tthis.newComputed    = window.getComputedStyle(this.newView)\r\n\t\t// todo: delete\r\n\t\tthis.baseBbox   = this.baseViewBbox\r\n\t\tthis.newBbox    = this.newViewBbox\r\n\r\n\t\t// todo:\r\n\t\tthis.scale = this.newViewBbox.width / this.originBbox.width\r\n\t\t// distance of size between origin and new view.\r\n\t\tthis.sizeDiff = Math.max(this.newViewBbox.width - this.originBbox.width, this.newViewBbox.height - this.originBbox.height)\r\n\t\t// TODO: calculate duration dynamically based on the distance. longer the distance, longer the animation.\r\n\r\n\t\tif (this.canBlendToolbars) {\r\n\t\t\tthis.blendAboveMain()\r\n\t\t}\r\n\t\tif (this.canBlendMains) {\r\n\t\t\tthis.blendMains()\r\n\t\t}\r\n\t\t// PUSH away other elevated elements (bottom tabs or bar)\r\n\t\t// FADE out everything else.\r\n\r\n\t}\r\n\r\n\t//calculateOrigin(base, origin) {\r\n\tcalculateOrigin() {\r\n\t\tvar baseWidth = this.baseViewBbox.width - this.baseViewBbox.left\r\n\t\tvar originMidpoint = this.originBbox.left - this.baseViewBbox.left + (this.originBbox.width / 2)\r\n\t\tthis.originSideX = originMidpoint > baseWidth / 2 ? 'right' : 'left'\r\n\t\tthis.originSideY = 'top'\r\n\t}\r\n\r\n\tasync play(...args) {\r\n\t\tvar baseViewZindex = this.baseView && this.baseView.style.zIndex\r\n\t\tvar backdropZindex = this.backdrop && this.backdrop.style.zIndex\r\n\t\tvar sheetZindex    = this.sheet    && this.sheet.style.zIndex\r\n\t\tvar originBgZindex = this.originBg && this.originBg.style.zIndex\r\n\t\tvar originZindex   = this.origin   && this.origin.style.zIndex\r\n\t\tvar newViewZindex  = this.newView  && this.newView.style.zIndex\r\n\r\n\t\tif (this.baseView) this.baseView.style.zIndex = ZINDEX_BASEVIEW\r\n\t\tif (this.backdrop) this.backdrop.style.zIndex = ZINDEX_BACKDROP\r\n\t\tif (this.sheet)    this.sheet.style.zIndex    = ZINDEX_SHEET\r\n\t\tif (this.originBg) this.originBg.style.zIndex = ZINDEX_ORIGINBG\r\n\t\tif (this.origin)   this.origin.style.zIndex   = ZINDEX_ORIGIN\r\n\t\tif (this.newView)  this.newView.style.zIndex  = ZINDEX_NEWVIEW\r\n\r\n\t\ttry {\r\n\t\t\tawait super.play(...args)\r\n\t\t} catch(err) {\r\n\t\t\t// Propagate the error further down the pipeline.\r\n\t\t\tthrow err\r\n\t\t} finally {\r\n\t\t\t// Reset Z-indexes to their original state no matter if succeded or err'd.\r\n\t\t\tif (this.baseView) this.baseView.style.zIndex = baseViewZindex\r\n\t\t\tif (this.backdrop) this.backdrop.style.zIndex = backdropZindex\r\n\t\t\tif (this.sheet)    this.sheet.style.zIndex    = sheetZindex\r\n\t\t\tif (this.originBg) this.originBg.style.zIndex = originBgZindex\r\n\t\t\tif (this.origin)   this.origin.style.zIndex   = originZindex\r\n\t\t\tif (this.newView)  this.newView.style.zIndex  = newViewZindex\r\n\t\t}\r\n\t}\r\n\r\n\tasync in(...args) {\r\n\t\tthis.baseView.setAttribute('hidden', '')\r\n\t\ttry {\r\n\t\t\tawait super.in(...args)\r\n\t\t} catch(err) {\r\n\t\t\tthrow err\r\n\t\t} finally {\r\n\t\t\tthis.baseView.style.display = 'none'\r\n\t\t\tthis.baseView.removeAttribute('hidden')\r\n\t\t}\r\n\t}\r\n\r\n\tasync out(...args) {\r\n\t\tthis.newView.setAttribute('hidden', '')\r\n\t\ttry {\r\n\t\t\tawait super.out(...args)\r\n\t\t} catch(err) {\r\n\t\t\tthrow err\r\n\t\t} finally {\r\n\t\t\tthis.newView.style.display = 'none'\r\n\t\t\tthis.newView.removeAttribute('hidden')\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tpushAwayElementsAbove() {\r\n\t}\r\n\tpushAwayElementsBelow() {\r\n\t}\r\n\r\n\tcreateBackdrop() {\r\n\t\tthis.backdrop = document.createElement('div')\r\n\t\tthis.backdrop.setAttribute('fx-backdrop', '')\r\n\t\tthis.baseView.append(this.backdrop)\r\n\t}\r\n\r\n\tcreateSheet() {\r\n\t\tthis.sheet = document.createElement('div')\r\n\t\t//this.sheet.style.outline = '1px solid red'\r\n\t\tthis.sheet.style.position = 'absolute'\r\n\t\tthis.sheet.style.backgroundColor = 'white'\r\n\t\tthis.sheet.style.willChange = 'box-shadow, transform, opacity, border-radius, left, right, top, bottom'\r\n\t\tthis.baseView.append(this.sheet)\r\n\t}\r\n\r\n\tscheduleResize(from, to, start = 0, end = 1) {\r\n\t\t//this.schedule(this.sheet, sheetResizeKeyframes, start, end)\r\n\t}\r\n\r\n\tscheduleSheetResize(start = 0, end = 1) {\r\n\t\tvar keyframes = this.calculateResizeKeyframes(this.origin, this.newView)\r\n\t\tthis.schedule(this.sheet, keyframes, start, end)\r\n\t}\r\n\r\n\tscheduleSheetTransform(start = 0, end = 1) {\r\n\t}\r\n\r\n\tgetKeyframes(node) {\r\n\t\tthis.nodes = this.nodes || new Map\r\n\t\tvar keyframes = this.nodes.get(node) || {\r\n\t\t\ttranslateX: 0,\r\n\t\t\ttranslateY: 0,\r\n\t\t\tscaleX: 1,\r\n\t\t\tscaleY: 1,\r\n\t\t}\r\n\t\tthis.nodes.set(node, keyframes)\r\n\t\treturn keyframes\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tasync transitionSheet($from, $to) {\r\n\t\tconsole.log('$from', $from)\r\n\t\tconsole.log('$to', $to)\r\n\t\tvar fromBbox = $from.getBoundingClientRect()\r\n\t\tvar toBbox = $to.getBoundingClientRect()\r\n\t\tvar fromComputed = window.getComputedStyle($from)\r\n\t\tvar toComputed = window.getComputedStyle($to)\r\n\r\n\t\tvar sheet = document.createElement('div')\r\n\t\tvar keyframes = {\r\n\t\t\ttop: [fromBbox.top + 'px', toBbox.top + 'px'],\r\n\t\t\tleft: [fromBbox.left + 'px', toBbox.left + 'px'],\r\n\t\t\twidth: [fromBbox.width + 'px', toBbox.width + 'px'],\r\n\t\t\theight: [fromBbox.height + 'px', toBbox.height + 'px'],\r\n\t\t\tbackgroundColor: [fromComputed.backgroundColor, toComputed.backgroundColor],\r\n\t\t\tborderRadius: [fromComputed.borderRadius, toComputed.borderRadius],\r\n\t\t\t//boxShadow: [fromComputed.boxShadow || 'var(--elevation-6)', toComputed.boxShadow || 'var(--elevation-0)'],\r\n\t\t\t//clipPath: [`inset(0px 0px 0px 0px round ${this.newComputed.borderRadius})`, 'inset(0px 0px 0px 0px round 0px)']\r\n\t\t}\r\n\r\n\t\tObject.assign(sheet.style, {\r\n\t\t\tposition: 'absolute',\r\n\t\t\t//zIndex: 2,\r\n\t\t\tzIndex: 102,\r\n\t\t})\r\n\t\tdocument.body.append(sheet)\r\n\r\n\t\tconsole.log('sheet', sheet)\r\n\t\tconsole.log('keyframes', keyframes)\r\n\r\n\t\t$to.style.visibility = 'hidden'\r\n\t\tthis.schedule(sheet, keyframes)\r\n\t\tawait this.finished\r\n\t\t$to.style.visibility = ''\r\n\t\tsheet.remove()\r\n\r\n/*\r\n\t\tvar $fromView = $from.parentElement.parentElement\r\n\t\tvar {duration, easing, fill} = this\r\n\t\tconsole.log('$fromView', $fromView)\r\n\t\t$fromView.animate({\r\n\t\t\topacity: [1, 0]\r\n\t\t}, {\r\n\t\t\tdelay: 0.5 * duration,\r\n\t\t\tduration: 0.5 * duration,\r\n\t\t\t//delay: 0.2 * duration,\r\n\t\t\t//duration: 0.6 * duration,\r\n\t\t\teasing,\r\n\t\t\tfill\r\n\t\t})\r\n*/\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\ttransitionNode($from, $to, options = {}) {\r\n\t\tvar fromBbox = $from.getBoundingClientRect()\r\n\t\tvar toBbox = $to.getBoundingClientRect()\r\n\r\n\t\tvar fromTransform = [\r\n\t\t\t`translate(0, 0)`,\r\n\t\t\t`translate(${toBbox.left - fromBbox.left}px, ${toBbox.top - fromBbox.top}px)`,\r\n\t\t]\r\n\t\tvar toTransform = [\r\n\t\t\t`translate(${fromBbox.left - toBbox.left}px, ${fromBbox.top - toBbox.top}px)`,\r\n\t\t\t`translate(0, 0)`,\r\n\t\t]\r\n\r\n\t\tif (options.scale !== false) {\r\n\t\t\tfromTransform[0] += ` scale(1, 1)`\r\n\t\t\tfromTransform[1] += ` scale(${toBbox.width / fromBbox.width}, ${toBbox.height / fromBbox.height})`\r\n\t\t\ttoTransform[0] += ` scale(${fromBbox.width / toBbox.width}, ${fromBbox.height / toBbox.height})`\r\n\t\t\ttoTransform[1] += ` scale(1, 1)`\r\n\t\t}\r\n\r\n\t\tvar duration = 400\r\n\t\tvar fill = 'both'\r\n\t\tvar easing = 'cubic-bezier(0.4, 0.0, 0.2, 1)'\r\n\r\n\t\t$from.animate({\r\n\t\t\ttransformOrigin: ['top left', 'top left'],\r\n\t\t\ttransform: fromTransform,\r\n\t\t\topacity: [1, 0],\r\n\t\t}, {duration, easing, fill})\r\n\r\n\t\t$to.animate({\r\n\t\t\ttransformOrigin: ['top left', 'top left'],\r\n\t\t\ttransform: toTransform,\r\n\t\t\topacity: [0, 1],\r\n\t\t}, {duration, easing, fill})\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"],"names":["dummy","document","createElement","animation","animate","Animation","constructor","prototype","Object","defineProperty","get","_finished","playState","Promise","resolve","reject","onfinish","oncancel","promiseTimeout","millis","setTimeout","cloneNode","original","computed","window","getComputedStyle","clone","localName","innerHTML","style","fontSize","fontWeight","color","reverseKeyframes","keyframes","entries","filter","pair","Array","isArray","map","reverseEntry","objectFromEntries","entry","reverse","AnimationOrchestrator","requests","animations","duration","fill","easing","started","startedResolve","finished","then","promises","a","all","running","some","schedule","node","start","end","push","finalize","direction","speed","totalDuration","delay","options","play","args","playOnly","cancel","length","pop","calculateTransform","translateX","translateY","scaleX","scaleY","temp","undefined","getTransformKeyframes","transform","Transition","originSideX","originSideY","transformOrigin","string","split","in","out","calculateResizeKeyframes","from","to","fromBbox","getBoundingClientRect","toBbox","top","left","width","height","_translateTo","origin","pivot","originBbox","pivotBbox","_scaleTo","nodeBbox","transformTo","translateTo","scaleTo","clipTo","view","viewBbox","right","bottom","clipPath","fadeOut","opacity","fadeIn","transitionTextNode","$from","$to","fromComputed","toComputed","$clone","assign","position","zIndex","body","appendChild","visibility","letterSpacing","console","log","remove","ZINDEX_BASEVIEW","ZINDEX_BACKDROP","ZINDEX_SHEET","ZINDEX_ORIGINBG","ZINDEX_ORIGIN","ZINDEX_NEWVIEW","ViewTransition","baseView","newView","display","baseViewBbox","newViewBbox","originComputed","newComputed","baseBbox","newBbox","scale","sizeDiff","Math","max","canBlendToolbars","blendAboveMain","canBlendMains","blendMains","calculateOrigin","baseWidth","originMidpoint","baseViewZindex","backdropZindex","backdrop","sheetZindex","sheet","originBgZindex","originBg","originZindex","newViewZindex","err","setAttribute","removeAttribute","pushAwayElementsAbove","pushAwayElementsBelow","createBackdrop","append","createSheet","backgroundColor","willChange","scheduleResize","scheduleSheetResize","scheduleSheetTransform","getKeyframes","nodes","Map","set","transitionSheet","borderRadius","transitionNode","fromTransform","toTransform"],"mappings":"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"}